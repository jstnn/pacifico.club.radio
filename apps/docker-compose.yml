version: '2'

services:
  icecast:
    build: ./icecast
    ports:
      - "8000:8000"
    networks:
      - radio

  # Add your host volumen in path/to/... or add your own volume below
  mpd:
    build: ./mpd
    ports:
      - "6600:6600"
    depends_on:
      - icecast
    networks:
      - radio
    volumes:
      - /data/radio/music:/var/lib/mpd/music
      - /data/radio/playlists:/var/lib/mpd/playlists
      - /data/radio/database:/var/lib/mpd/database

  sima:
    build: ./sima
    depends_on:
      - mpd
    networks:
      - radio

  ympd:
    build: ./ympd
    ports:
      - "8080:8080"
    depends_on:
      - mpd
    networks:
      - radio
  
  pureftpd:
    build: ./pureftpd
    ports:
      - "21:21"
      - "30000-30009:30000-30009"
    environment:
      PUBLICHOST: localhost
    volumes:
      - /data/radio/music:/home/ftpuser/sativo
    privileged: true
    restart: always

networks:
  radio:
    driver: bridge

# If you use your own volumes instead host volumes, uncomment this section
# volumes:
#   mpd_music:
#     external: true
#   mpd_playlists:
#     external: true
#   mpd_database:
#     external: true


